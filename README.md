# NewAPI Balances

由于本人经常会想查看 NewAPI 账户余额，且现在的中转站大部分都是基于 NewAPI 的模式， 所以想写一个插件来方便的查看余额，且支持多账户切换。
在 VS Code Cursor状态栏实时显示分钟级 NewAPI 账户余额，支持多账户切换和余额预警，借鉴了 cc-switch 和 88code 的余额查询。

## 教程
先下载项目页面右侧的 release 中的 newapi-balances-0.1.vsix 文件，并拖动到 VS Code 或者 Cursor 中安装。

接下来就可以开始配置了，这里基于宙斯佬的 packycode 进行演示；

第一步：先获取你的信息
![1764914623195](image/README/1764914623195.png)

第二步：
![1764914681385](image/README/1764914681385.png)

第三步：
![1764914771014](image/README/1764914771014.png)

插件配置完后效果如下：
![1764914363293](image/README/1764914363293.png)
![1764914829015](image/README/1764914829015.png)


## 功能特性

- **状态栏显示**：右下角显示 `[配置名称] $余额`
- **余额预警**：根据余额百分比自动变色
  - \> 75%：紫色
  - 50-75%：蓝色
  - 25-50%：黄色
  - ≤ 25%：红色
- **多账户支持**：可配置多个 API 账户，随时切换
- **自动刷新**：每分钟自动更新余额
- **手动刷新**：点击状态栏可立即刷新

## 使用方法

### 首次配置

1. 安装插件后，状态栏会显示"点击配置"
2. 点击状态栏，弹出配置表单
3. 填写以下信息：
   - **配置名称**：自定义名称，用于多账户区分
   - **供应商地址**：NewAPI 服务地址（如 `https://api.example.com`）
   - **Access Token**：API 访问令牌，从 newapi 的中转站的个人设置，安全设置里获得
   - **User ID**：用户 ID，从 newapi 的中转站的个人设置里获得
4. 全部填写后点击"保存配置"

### 日常使用

点击状态栏可进行以下操作：
- **刷新**：立即获取最新余额
- **添加配置**：添加新的 API 账户
- **切换配置**：在多个账户间切换（多账户时显示）
- **查看详情**：查看套餐、已用、剩余、总额等详细信息

### 配置文件

配置保存在 `~/.newapi-balances/config.json`，格式如下：

```json
[
  {
    "name": "我的账户",
    "baseUrl": "https://api.example.com",
    "accessToken": "your-token",
    "userId": "your-user-id"
  }
]
```

## 命令

- `NewAPI Balances: Show Menu` - 打开操作菜单
- `NewAPI Balances: Refresh` - 刷新余额

## 许可证

MIT
